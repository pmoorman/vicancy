(function(e){"use strict";var t=Array.prototype.slice;var n=function(e){return("0"+e.toString()).substr(-2)};var r={day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridian:["AM","PM"]};var i={precision:3,separator:".",delimiter:",",strip_insignificant_zeros:false};var s={unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."};var o={precision:3,separator:".",delimiter:""};var u=[null,"kb","mb","gb","tb"];var a={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,fallbacks:false,translations:{}};e.reset=function(){this.defaultLocale=a.defaultLocale;this.locale=a.locale;this.defaultSeparator=a.defaultSeparator;this.placeholder=a.placeholder;this.fallbacks=a.fallbacks;this.translations=a.translations};e.initializeOptions=function(){if(typeof this.defaultLocale==="undefined"&&this.defaultLocale!==null)this.defaultLocale=a.defaultLocale;if(typeof this.locale==="undefined"&&this.locale!==null)this.locale=a.locale;if(typeof this.defaultSeparator==="undefined"&&this.defaultSeparator!==null)this.defaultSeparator=a.defaultSeparator;if(typeof this.placeholder==="undefined"&&this.placeholder!==null)this.placeholder=a.placeholder;if(typeof this.fallbacks==="undefined"&&this.fallbacks!==null)this.fallbacks=a.fallbacks;if(typeof this.translations==="undefined"&&this.translations!==null)this.translations=a.translations};e.initializeOptions();e.locales={};e.locales.get=function(t){var n=this[t]||this[e.locale]||this["default"];if(typeof n==="function"){n=n(t)}if(n instanceof Array===false){n=[n]}return n};e.locales["default"]=function(t){var n=[],r=[],i,s;if(t){n.push(t)}if(!t&&e.locale){n.push(e.locale)}if(e.fallbacks&&e.defaultLocale){n.push(e.defaultLocale)}n.forEach(function(t){i=t.split("-")[0];if(!~r.indexOf(t)){r.push(t)}if(e.fallbacks&&i&&i!==t&&!~r.indexOf(i)){r.push(i)}});if(!n.length){n.push("en")}return r};e.pluralization={};e.pluralization.get=function(t){return this[t]||this[e.locale]||this["default"]};e.pluralization["default"]=function(e){switch(e){case 0:return["zero","other"];case 1:return["one"];default:return["other"]}};e.currentLocale=function(){return this.locale||this.defaultLocale};e.isSet=function(e){return e!==undefined&&e!==null};e.lookup=function(e,t){t=this.prepareOptions(t);var n=this.locales.get(t.locale),r=n[0],i,s,o;if(e.constructor===Array){e=e.join(this.defaultSeparator)}if(t.scope){e=[t.scope,e].join(this.defaultSeparator)}while(n.length){i=n.shift();s=e.split(this.defaultSeparator);o=this.translations[i];if(!o){continue}while(s.length){o=o[s.shift()];if(o===undefined||o===null){break}}if(o!==undefined&&o!==null){return o}}if(this.isSet(t.defaultValue)){return t.defaultValue}};e.meridian=function(){var e=this.lookup("time");var t=this.lookup("date");if(e&&e.am&&e.pm){return[e.am,e.pm]}else if(t&&t.meridian){return t.meridian}else{return r.meridian}};e.prepareOptions=function(){var e=t.call(arguments),n={},r;while(e.length){r=e.shift();if(typeof r!="object"){continue}for(var i in r){if(!r.hasOwnProperty(i)){continue}if(this.isSet(n[i])){continue}n[i]=r[i]}}return n};e.createTranslationOptions=function(e,t){var n=[{scope:e}];if(this.isSet(t.defaults)){n=n.concat(t.defaults)}if(this.isSet(t.defaultValue)){n.push({message:t.defaultValue});delete t.defaultValue}return n};e.translate=function(e,t){t=this.prepareOptions(t);var n=this.createTranslationOptions(e,t);var r;var i=n.some(function(e){if(this.isSet(e.scope)){r=this.lookup(e.scope,t)}else if(this.isSet(e.message)){r=e.message}if(r!==undefined&&r!==null){return true}},this);if(!i){return this.missingTranslation(e)}if(typeof r==="string"){r=this.interpolate(r,t)}else if(r instanceof Object&&this.isSet(t.count)){r=this.pluralize(t.count,r,t)}return r};e.interpolate=function(e,t){t=this.prepareOptions(t);var n=e.match(this.placeholder),r,i,s,o;if(!n){return e}var i;while(n.length){r=n.shift();s=r.replace(this.placeholder,"$1");if(this.isSet(t[s])){i=t[s].toString().replace(/\$/gm,"_#$#_")}else{i=this.missingPlaceholder(r,e)}o=new RegExp(r.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}"));e=e.replace(o,i)}return e.replace("_#$#_","$")};e.pluralize=function(e,t,n){n=this.prepareOptions(n);var r,i,s,o,u;if(t instanceof Object){r=t}else{r=this.lookup(t,n)}if(!r){return this.missingTranslation(t)}i=this.pluralization.get(n.locale);s=i(Math.abs(e));while(s.length){o=s.shift();if(this.isSet(r[o])){u=r[o];break}}n.count=String(e);return this.interpolate(u,n)};e.missingTranslation=function(e){var n='[missing "';n+=this.currentLocale()+".";n+=t.call(arguments).join(".");n+='" translation]';return n};e.missingPlaceholder=function(e,t){return"[missing "+e+" value]"};e.toNumber=function(e,t){t=this.prepareOptions(t,this.lookup("number.format"),i);var n=e<0,r=Math.abs(e).toFixed(t.precision).toString(),s=r.split("."),o,u=[],a;e=s[0];o=s[1];while(e.length>0){u.unshift(e.substr(Math.max(0,e.length-3),3));e=e.substr(0,e.length-3)}a=u.join(t.delimiter);if(t.strip_insignificant_zeros&&o){o=o.replace(/0+$/,"")}if(t.precision>0&&o){a+=t.separator+o}if(n){a="-"+a}return a};e.toCurrency=function(e,t){t=this.prepareOptions(t,this.lookup("number.currency.format"),this.lookup("number.format"),s);e=this.toNumber(e,t);e=t.format.replace("%u",t.unit).replace("%n",e);return e};e.localize=function(e,t){switch(e){case"currency":return this.toCurrency(t);case"number":e=this.lookup("number.format");return this.toNumber(t,e);case"percentage":return this.toPercentage(t);default:if(e.match(/^(date|time)/)){return this.toTime(e,t)}else{return t.toString()}}};e.parseDate=function(e){var t,n,r;if(typeof e=="object"){return e}t=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})([\.,]\d{1,3})?)?(Z|\+00:?00)?/);if(t){for(var i=1;i<=6;i++){t[i]=parseInt(t[i],10)||0}t[2]-=1;r=t[7]?1e3*("0"+t[7]):null;if(t[8]){n=new Date(Date.UTC(t[1],t[2],t[3],t[4],t[5],t[6],r))}else{n=new Date(t[1],t[2],t[3],t[4],t[5],t[6],r)}}else if(typeof e=="number"){n=new Date;n.setTime(e)}else if(e.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)){n=new Date;n.setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" ")))}else if(e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)){n=new Date;n.setTime(Date.parse(e))}else{n=new Date;n.setTime(Date.parse(e))}return n};e.strftime=function(t,i){var s=this.lookup("date"),o=e.meridian();if(!s){s={}}s=this.prepareOptions(s,r);var u=t.getDay(),a=t.getDate(),f=t.getFullYear(),l=t.getMonth()+1,c=t.getHours(),h=c,p=c>11?1:0,d=t.getSeconds(),v=t.getMinutes(),m=t.getTimezoneOffset(),g=Math.floor(Math.abs(m/60)),y=Math.abs(m)-g*60,b=(m>0?"-":"+")+(g.toString().length<2?"0"+g:g)+(y.toString().length<2?"0"+y:y);if(h>12){h=h-12}else if(h===0){h=12}i=i.replace("%a",s.abbr_day_names[u]);i=i.replace("%A",s.day_names[u]);i=i.replace("%b",s.abbr_month_names[l]);i=i.replace("%B",s.month_names[l]);i=i.replace("%d",n(a));i=i.replace("%e",a);i=i.replace("%-d",a);i=i.replace("%H",n(c));i=i.replace("%-H",c);i=i.replace("%I",n(h));i=i.replace("%-I",h);i=i.replace("%m",n(l));i=i.replace("%-m",l);i=i.replace("%M",n(v));i=i.replace("%-M",v);i=i.replace("%p",o[p]);i=i.replace("%S",n(d));i=i.replace("%-S",d);i=i.replace("%w",u);i=i.replace("%y",n(f));i=i.replace("%-y",n(f).replace(/^0+/,""));i=i.replace("%Y",f);i=i.replace("%z",b);return i};e.toTime=function(e,t){var n=this.parseDate(t),r=this.lookup(e);if(n.toString().match(/invalid/i)){return n.toString()}if(!r){return n.toString()}return this.strftime(n,r)};e.toPercentage=function(e,t){t=this.prepareOptions(t,this.lookup("number.percentage.format"),this.lookup("number.format"),o);e=this.toNumber(e,t);return e+"%"};e.toHumanSize=function(e,t){var n=1024,r=e,i=0,s,o;while(r>=n&&i<4){r=r/n;i+=1}if(i===0){s=this.t("number.human.storage_units.units.byte",{count:r});o=0}else{s=this.t("number.human.storage_units.units."+u[i]);o=r-Math.floor(r)===0?0:1}t=this.prepareOptions(t,{precision:o,format:"%n%u",delimiter:""});e=this.toNumber(r,t);e=t.format.replace("%u",s).replace("%n",e);return e};e.t=e.translate;e.l=e.localize;e.p=e.pluralize})(typeof exports==="undefined"?this.I18n||(this.I18n={}):exports)